window.__require=function t(e,n,i){function o(s,a){if(!n[s]){if(!e[s]){var r=s.split("/");if(r=r[r.length-1],!e[r]){var l="function"==typeof __require&&__require;if(!a&&l)return l(r,!0);if(c)return c(r,!0);throw new Error("Cannot find module '"+s+"'")}s=r}var _=n[s]={exports:{}};e[s][0].call(_.exports,function(t){return o(e[s][1][t]||t)},_,_.exports,t,e,n,i)}return n[s].exports}for(var c="function"==typeof __require&&__require,s=0;s<i.length;s++)o(i[s]);return o}({NewScript:[function(t,e){"use strict";cc._RF.push(e,"ea9c9KxanhAiaAU7/n9h10d","NewScript"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],Notification:[function(t,e){"use strict";cc._RF.push(e,"02039ZP/URBDqOEAyLdcYUn","Notification"),window.GameEvent={GOAL_BULLET:"GOAL_BULLET"},window.Notification={_eventMap:[],on:function(t,e,n){void 0===this._eventMap[t]&&(this._eventMap[t]=[]),this._eventMap[t].push({callback:e,target:n,isonce:!1})},once:function(t,e,n){void 0===this._eventMap[t]&&(this._eventMap[t]=[]),this._eventMap[t].push({callback:e,target:n,isonce:!0})},emit:function(t,e){var n=this._eventMap[t];if(void 0!==n)for(var i=0;i<n.length;i++){var o=n[i];o&&(o.callback.call(o.target,e),o.isonce&&this.off(t,o.callback))}},off:function(t,e){var n=this._eventMap[t];if(void 0!==n)for(var i=0;i<n.length;i++){var o=n[i];if(o&&o.callback===e){n[i]=void 0;break}}},offType:function(t){this._eventMap[t]=void 0}},cc._RF.pop()},{}],WxSDKAPI:[function(t,e){"use strict";cc._RF.push(e,"626f7o9XLJDiqOlE6hzMVSP","WxSDKAPI");var n=cc.Class({ctor:function(){this._videoCall=null,this._video=null,this.btnNode=null,this._bannerAd=null},cloudInit:function(){wx.cloud.init()},init:function(t,e){var n=this;this.btnNode=t,wx.loadSubpackage({name:"subRes",success:function(){g_Log("yse!!!"),window.boot()},fail:function(){}}),wx.showShareMenu({withShareTicket:!0}),wx.updateShareMenu({withShareTicket:!0}),wx.onShareAppMessage(function(){var t={imgType:1,text:"\u6709\u4eba@\u6211\uff01",imgName:"https://minigame-cdn.binglue.com/gameHGRYZ/1.jpg"};return{title:t.text,imageUrl:t.imgURL}}),this.onAppOpen(),wx.getSystemInfo({success:function(){g_Log("\u521b\u5efa\u767b\u9646\u6309\u94ae"),n.createAuthorizeBtn(e)}})},onAppOpen:function(){wx.onShow(function(t){g_Log("onshow data"+t.query)}),wx.onHide(function(){})},updateApp:function(){var t=wx.getUpdateManager();t.onCheckForUpdate(function(t){g_Log("\u8bf7\u6c42\u5b8c\u65b0\u7248\u672c\u4fe1\u606f\u7684\u56de\u8c03",t.hasUpdate)}),t.onUpdateReady(function(){wx.showModal({title:"\u66f4\u65b0\u63d0\u793a",content:"\u65b0\u7248\u672c\u5df2\u7ecf\u51c6\u5907\u597d\uff0c\u662f\u5426\u91cd\u542f\u5e94\u7528\uff1f",success:function(e){e.confirm&&t.applyUpdate()}})}),t.onUpdateFailed(function(){g_Log("\u65b0\u7684\u7248\u672c\u4e0b\u8f7d\u5931\u8d25")})},createAuthorizeBtn:function(t){void 0===t&&(t=function(){g_Log("\u672a\u914d\u7f6e\u56de\u8c03")});var e=cc.size(this.btnNode.width+10,this.btnNode.height+10),n=cc.view.getFrameSize(),i=cc.director.getWinSize(),o=(.5*i.width+this.btnNode.x-.5*e.width)/i.width*n.width,c=(.5*i.height-this.btnNode.y-.5*e.height)/i.height*n.height,s=e.width/i.width*n.width,a=e.height/i.height*n.height;g_Log("left"+o);var r=this;r.btnAuthorize=wx.createUserInfoButton({type:"text",text:"",style:{left:o,top:c,width:s,height:a,lineHeight:0,textAlign:"center",fontSize:16,borderRadius:4}}),r.btnAuthorize.onTap(function(){r.btnAuthorize.hide(),r.btnAuthorize.destroy(),r.reLogin(t)})},reLogin:function(t){g_Log("\u7528\u6237\u767b\u5f55"),this.getOpenId(),wx.getSetting({success:function(e){!0===e.authSetting["scope.userInfo"]?(g_Log("\u5df2\u7ecf\u6388\u6743"),t()):(g_Log("\u62d2\u7edd\u6388\u6743"),self.createAuthorizeBtn(t))}})},getUserInfo:function(t){void 0===t&&(t=function(){g_Log("\u6ca1\u8bbe\u7f6e\u56de\u8c03\u51fd\u6570")}),wx.getUserInfo({success:function(e){Object.assign(g_UserData,e.userInfo),t(e)}})},login:function(t){DEBUG?(window.g_openId=Date.now(),g_GAME.serverMgr.send_login({code:t,testID:g_openId})):g_GAME.serverMgr.send_login({code:t})},getOpenId:function(){var t=this;DEBUG?this.login("debug"):wx.login({success:function(e){e.code&&(g_Log("res.code!"+e.code),t.login(e.code))}})},showBannerAdvertisement:function(t,e){if(""!=t)return this._bannerAd=wx.createBannerAd({adUnitId:t,style:{left:0,top:0,width:e,height:0}}),this._bannerAd.onError(function(t){g_Log("banner \u5e7f\u544a\u52a0\u8f7d\u5931\u8d25",t)}),this._bannerAd.onLoad(function(){}),this._bannerAd.show(),this._bannerAd},closeBannerAdvertisement:function(){this._bannerAd&&(this._bannerAd.destory(),this._bannerAd=null)},share:function(t){wx.shareAppMessage({title:t.text,imageUrl:t.imgURL,query:t.query})},showVideoAdvertisement:function(t,e){var n=this;this._video&&this._videoCall&&(g_Log("remove pre video!!!"),this._video.offLoad(this.onVideoLoad),this._video.offError(this.onVideoError),this._video.offClose(this.onVideoClose),this._videoCall=null,this._video=null),this._videoCall=e,this._video=wx.createRewardedVideoAd({adUnitId:t}),this._video.onLoad(this.onVideoLoad),this._video.onError(this.onVideoError),this._video.onClose(this.onVideoClose),this._video.show().catch(function(t){g_Log("\u6fc0\u52b1\u89c6\u9891\u5f02\u5e38~~~",t),n._video.load().then(function(){return n._video.show()})})},onVideoLoad:function(){},onVideoError:function(){g_Log("\u6fc0\u52b1\u89c6\u9891\u51fa\u73b0\u95ee\u9898"),(void 0)._videoCall(!1,"error")},onVideoClose:function(t){var e;e=!!(t&&t.isEnded||void 0===t),(void 0)._videoCall(e,"normal")},inviteFriend:function(t){var e=t.roomId;g_Log("\u9080\u8bf7\u73a9\u5bb6\u8fdb\u5165roomId"+e),wx.shareAppMessage({title:"\u6d4b\u8bd5\u623f\u95f4\u5206\u4eab",query:"roomId="+e+"&avatarUrl"+g_UserData.avatarUrl})},setUserIcon:function(t,e){var n=wx.createImage();n.onload=function(){var t=new cc.Texture2D;t.width=40,t.height=40,t.initWithElement(n),t.handleLoadedTexture(),e.spriteFrame=new cc.SpriteFrame(t)},n.src=t},getLaunchOptionsSync:function(){return wx.getLaunchOptionsSync()}});e.exports=n,cc._RF.pop()},{}],achLayer:[function(t,e){"use strict";cc._RF.push(e,"e4beb2BnXZEILGFLm/scK7o","achLayer"),cc.Class({extends:cc.Component,properties:{},ctor:function(){},loadUI:function(){},onLoad:function(){this.loadUI()},onEnable:function(){},back:function(){g_StartLayer.switchLayerShow(LAYER.lobbyL)}}),cc._RF.pop()},{}],ballItem:[function(t,e){"use strict";cc._RF.push(e,"e60f2NzkdBCNqAwlZEilQq8","ballItem"),cc.Class({extends:cc.Component,properties:{m_ballTab:cc.Node,m_ballPrefab:cc.Prefab,m_bg:cc.Sprite,m_tabBg1:cc.SpriteFrame,m_tabBg2:cc.SpriteFrame,m_name:cc.Label,m_redPoint:cc.Node,m_useIcon:cc.Node},ctor:function(){this.m_id=null},onLoad:function(){this.node.getComponent(cc.Button)},addClickEvent:function(){var t=new cc.Component.EventHandler;t.target=this.node,t.component="ballItem",t.handler="callback",t.customEventData=this.m_id,this.m_btn=this.node.getComponent(cc.Button),this.m_btn.clickEvents.push(t)},callback:function(t,e){this.m_ctr.switchShowBall(e)},start:function(){},loadUI:function(t,e,n){this.m_ctr=n,this.m_id=e,this.m_bg=e/2?this.m_tabBg1:this.m_tabBg2;var i=t.name;this.m_name.string=i;var o=cc.instantiate(this.m_ballPrefab);this.m_ballTab.addChild(o),o.getComponent("ball").switchBall(e),this.addClickEvent()}}),cc._RF.pop()},{}],ballLayer:[function(t,e){"use strict";function n(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=i(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0;return function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}cc._RF.push(e,"048dfh37HpHfLZZHBxQfcvu","ballLayer"),cc.Class({extends:cc.Component,properties:{m_BallItem:cc.Prefab,m_UseBtn:cc.Node,m_BtnArr:{default:[],type:cc.Node},m_content:cc.Node,m_showBall:cc.Node},ctor:function(){this.m_Ball=null,this.m_tarBallId=0},loadUI:function(){for(var t,e=n(BALL_LAYER_DATA);!(t=e()).done;){var i=t.value,o=i[0],c=i[1],s=cc.instantiate(this.m_BallItem);this.m_content.addChild(s),s.getComponent("ballItem").loadUI(c,o,this)}},onLoad:function(){this.m_showBall=this.m_showBall.getComponent("ball"),this.loadUI()},onEnable:function(){},onBtnClick:function(){},onBtnUseBall:function(){var t=this;GAME_DATA.ballId=this.m_tarBallId,this.m_BtnArr.forEach(function(e,n){var i=e.getChildByName("label");n==t.m_tarBallId?i.active=!0:i.active=!1}),this.m_UseBtn.active=!1},back:function(){g_StartLayer.switchLayerShow(LAYER.lobbyL)},switchShowBall:function(t){t==GAME_DATA.ballId?this.m_UseBtn.active=!1:this.m_UseBtn.active=!0,this.m_tarBallId=t,this.m_showBall.switchBall(t)}}),cc._RF.pop()},{}],ball_bullet:[function(t,e){"use strict";cc._RF.push(e,"f3a80n0E2NFyrvNyKNUhWD2","ball_bullet"),cc.Class({extends:cc.Component,properties:{m_test:cc.Node},start:function(){},onBeginContact:function(t,e,n){if("bottom"==n.node.name){var i=e.node.getComponent(cc.RigidBody),o=i.getWorldCenter();i.applyLinearImpulse(cc.v2(0,-4e3),o)}}}),cc._RF.pop()},{}],ball:[function(t,e){"use strict";cc._RF.push(e,"a47cc0J1VFKFLtLoZoGNPJs","ball"),cc.Class({extends:cc.Component,properties:{m_ball:cc.Sprite,m_ballArr:{type:cc.SpriteFrame,default:[]}},onLoad:function(){this.m_aniCpt=this.m_ball.node.getComponent(cc.Animation)},ctor:function(){this.m_BallId=0,this.m_Status=null},switchBall:function(t){this.m_BallId=t,t<this.m_ballArr.length?(this.m_aniCpt.stop(),this.m_ball.node.setScale(1),this.m_ball.spriteFrame=this.m_ballArr[t]):(this.m_ball.node.setScale(2),this.m_aniCpt.play(BALL_LAYER_DATA.get(t).aniName))},start:function(){},setCtr:function(t){this.m_Ctr=t},setFire:function(){},getStatus:function(){return this.m_Status},onBeginContact:function(t,e,n){if("bottom"==n.node.name){var i=e.node.getComponent(cc.RigidBody),o=i.getWorldCenter();i.applyLinearImpulse(cc.v2(1e3,0),o)}}}),cc._RF.pop()},{}],bk_check:[function(t,e){"use strict";cc._RF.push(e,"e45d5bmRvdHUpde+7Ry2OHf","bk_check"),cc.Class({extends:cc.Component,properties:{m_target:cc.Node},ctor:function(){this.m_check=!1},onCollisionEnter:function(t,e){g_Log("\u649e\u4e0a\u4e86"),t.node.getPosition().y>e.node.getPosition().y+20?this.m_check=!0:this.m_check=!1},onCollisionExit:function(t,e){this.m_check&&(this.m_check=!1,t.node.getPosition().y<e.node.getPosition().y-10&&(g_Log("defen"),g_gameLayer2.goal()))}}),cc._RF.pop()},{}],btn:[function(t,e){"use strict";cc._RF.push(e,"b29d0HEnNpOrrZQXuk99f2e","btn"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],charactorLayer:[function(t,e){"use strict";cc._RF.push(e,"8371fSQlAdJG4xrNrP/qrry","charactorLayer"),cc.Class({extends:cc.Component,properties:{m_ChaArr:{default:[],type:cc.Node},m_UseBtn:cc.Node,m_BtnArr:{default:[],type:cc.Node}},ctor:function(){this.m_tarBallId=0},onLoad:function(){},start:function(){this.updateLayer()},updateLayer:function(){this.m_BtnArr.forEach(function(t,e){t.getChildByName("name").getComponent(cc.Label).string=CHARACTER.name[e]})},onBtnClick:function(t,e){e==this.m_tarBallId?this.m_UseBtn.active=!1:this.m_UseBtn.active=!0,this.switchCha(e)},switchCha:function(t){this.m_tarBallId=t,this.m_ChaArr.forEach(function(e,n){e.active=t==n})},onBtnUseBall:function(){var t=this;GAME_DATA.characterId=this.m_tarBallId,this.m_BtnArr.forEach(function(e,n){var i=e.getChildByName("label");n==t.m_tarBallId?i.active=!0:i.active=!1}),this.m_UseBtn.active=!1},back:function(){g_StartLayer.switchLayerShow(LAYER.lobbyL)}}),cc._RF.pop()},{}],clound:[function(t,e){"use strict";cc._RF.push(e,"d64d2OV33lP8LEEBk0yc50W","clound"),cc.Class({extends:cc.Component,properties:{cloundNode:cc.Node,dt:cc.Number},start:function(){console.log(cc.view.getVisibleSize())},update:function(t){var e=cc.view.getVisibleSize();this.cloundNode.x+=t*(this.dt||10),this.cloundNode.x>e.width+200&&(this.cloundNode.x=-200)}}),cc._RF.pop()},{}],define:[function(t,e){"use strict";cc._RF.push(e,"c847bDtYm9HEbEt394yb4Bf","define"),window.DEBUG=!0,window.MaxHitDis=230,window.MaxHitimpulse=5e3,window.PACKET_PER_SEC=60,window.SPEED=7.5,window.G_CHAIRID=null,window.g_SERVER=null,window.flag=[!1,!1],window.g_openId=null,window.WXSDK=null,window.g_Server=null,window.g_StartLayer=null,window.g_GAME=null,window.g_gameLayer2=null,window.LAYER=cc.Enum({matchL:-1,characterL:-1,ballL:-1,bulletL:-1,lobbyL:-1,achieventL:-1,endL:-1}),window.BALL_ID=cc.Enum({BALL1:-1,BALL2:-1,BALL3:-1,BALL4:-1,BALL5:-1,BALL6:-1,BALL7:-1,BALL8:-1});var n=[[BALL_ID.BALL1,{name:"\u8db3\u7403"}],[BALL_ID.BALL2,{name:"\u7bee\u7403"}],[BALL_ID.BALL3,{name:"\u6392\u7403"}],[BALL_ID.BALL4,{name:"\u9ed1\u516b"}],[BALL_ID.BALL5,{name:"\u6a44\u6984"}],[BALL_ID.BALL6,{name:"\u4e94\u661f\u9f99\u73e0"}],[BALL_ID.BALL7,{name:"\u98de\u706b\u6d41\u661f",aniName:"fireball"}],[BALL_ID.BALL8,{name:"\u5730\u7206\u5929\u661f",aniName:"eleBall"}]];window.BALL_LAYER_DATA=new Map(n),window.CHARACTER={name:{0:"\u5c0f\u9f99\u4eba",1:"\u6447\u6eda\u54e5",2:"\u5c0f\u50bb\u72d7",3:"\u5f85\u5b9a"}},window.g_Log=function(){},window.translate=function(t){return{x:t.x/30,y:-1*t.y/30}},window.translate2=function(t){return t.x*=30,t.y*=-30,t},cc._RF.pop()},{}],door:[function(t,e){"use strict";cc._RF.push(e,"5e98cTv4zRG64bGjKUelCuO","door"),cc.Class({extends:cc.Component,properties:{m_Ani:cc.Animation},ctor:function(){},start:function(){},setCtr:function(t){this.m_Ctr=t},setDoorId:function(t){this.m_Id=t},onCollisionEnter:function(t){if(t.node.checkTime){if(!(Date.now()-t.node.checkTime>3e3))return;t.node.checkTime=Date.now()}else t.node.checkTime=Date.now();"ball"==t.node.name&&t.node.active}}),cc._RF.pop()},{}],"event-names":[function(t,e,n){"use strict";cc._RF.push(e,"b2886HkOVNLk7RQK4+q+aZ6","event-names"),n.__esModule=!0,n.C_JUMP=n.C_HIT=n.C_RIGHT_UP=n.C_RIGHT_DOWN=n.C_LEFT_UP=n.C_LEFT_DOWN=n.C_JOIN_ROOM=n.C_CREATE_ROOM=n.C_LOIN=n.S_CREATE_ROOM_OK=n.S_SET_SCORE=n.S_NEW_ROUND=n.S_BALL_POS=n.S_RIGHT_END=n.S_RIGHT_START=n.S_LEFT_END=n.S_LEFT_START=n.S_PLAYER_JUMP=n.S_LOGIN_SUCCESS=n.S_PLAYER_FIRE=n.S_GAME_END=n.S_GAME_START=void 0,n.S_GAME_START="gameStart",n.S_GAME_END="gameEnd",n.S_PLAYER_FIRE="fire",n.S_LOGIN_SUCCESS="loginSucess",n.S_PLAYER_JUMP="jump",n.S_LEFT_START="left_start",n.S_LEFT_END="left_end",n.S_RIGHT_START="right_start",n.S_RIGHT_END="right_end",n.S_BALL_POS="pos",n.S_NEW_ROUND="new_round",n.S_SET_SCORE="set_score",n.S_CREATE_ROOM_OK="create_room_ok",n.C_LOIN="login",n.C_CREATE_ROOM="create_room",n.C_JOIN_ROOM="join_room",n.C_LEFT_DOWN="left_down",n.C_LEFT_UP="left_up",n.C_RIGHT_DOWN="right_down",n.C_RIGHT_UP="right_up",n.C_HIT="hit",n.C_JUMP="jump",cc._RF.pop()},{}],fight:[function(t,e){"use strict";cc._RF.push(e,"77c57M06+1JJbKPOYI1Ers+","fight"),cc.Class({extends:cc.Component,properties:{},ctor:function(){this.m_HitFlag=!1},start:function(){},setCtr:function(t){this.m_ctr=t},onCollisionEnter:function(t,e){g_Log("\u649e\u4e0a\u4e86"),this.hit(e.node.getPosition(),t.node)},hit:function(t,e){var n=this;if(!this.m_HitFlag){this.m_ctr.reduceBullet();var i=e.getPosition(),o=e.getComponent(cc.RigidBody);o.linearVelocity=cc.v2(0,0);var c=i.sub(t).angle(cc.v2(1,0)),s={x:-22e3*Math.sin(c),y:22e3*Math.cos(c)/3},a=o.getWorldCenter();o.applyLinearImpulse({x:s.y,y:.9*-s.x},a),new Promise(function(t){n.m_HitFlag=!1;var e=cc.scaleTo(.3,.8),i=cc.callFunc(function(){n.node.active=!1,t()}),o=cc.sequence(e,i);n.node.runAction(o)}).then(function(){n.scheduleOnce(function(){n.m_HitFlag=!1,n.node.setScale(1.3),n.node.active=!0},.2)})}}}),cc._RF.pop()},{}],gameInfoLayer:[function(t,e){"use strict";cc._RF.push(e,"46d51wyrhRI6LSc4X5Sew1w","gameInfoLayer"),cc.Class({extends:cc.Component,properties:{m_tabIcon1:cc.Node,m_tabIcon2:cc.Node},ctor:function(){},loadUI:function(){},onLoad:function(){this.loadUI()},onEnable:function(){},back:function(){g_StartLayer.switchLayerShow(LAYER.lobbyL)},tabClick:function(t,e){0==e?(this.m_tabIcon1.active=!0,this.m_tabIcon2.active=!1):(this.m_tabIcon1.active=!1,this.m_tabIcon2.active=!0)}}),cc._RF.pop()},{}],gameServer:[function(t,e){"use strict";cc._RF.push(e,"36c3aOHvfpHV4GA5N8dcegH","gameServer");var n=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=i(void 0);if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in t)if("default"!==c&&Object.prototype.hasOwnProperty.call(t,c)){var s=o?Object.getOwnPropertyDescriptor(t,c):null;s&&(s.get||s.set)?Object.defineProperty(n,c,s):n[c]=t[c]}return n.default=t,e&&e.set(t,n),n}(t("./event-names.js"));function i(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(i=function(t){return t?n:e})(t)}function o(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=c(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t,e){if(t){if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var a=function(){function t(){var t=this;DEBUG?window.SOCKET=io.connect("ws://127.0.0.1:3001"):window.SOCKET=io.connect("wss://zero2one.moderate.run:8058"),SOCKET.on("connection",function(){g_Log("connection ok!!!"),t.sendMsg("connected",{openId:g_UserData.openId})}),this.addMsgListen()}var e=t.prototype;return e.registerMsgCallF=function(t){for(var e,n=function(){var t=e.value,n=t[0],i=t[1];window.SOCKET.on(n,function(t){i(t)})},i=o(t);!(e=i()).done;)n()},e.addMsgListen=function(){var t=this;g_GAME,window.SOCKET.on(n.S_GAME_START,function(t){g_Log("gameStart"),g_UserData.id=t.playerId,g_Log("g_UserData.id"+g_UserData.id),G_CHAIRID=g_UserData.id,g_Log("g_UserData.id"+g_UserData.id),cc.director.preloadScene("battle",function(){cc.director.loadScene("battle")})}),window.SOCKET.on(n.S_LOGIN_SUCCESS,function(e){if(g_Log("\uff01\uff01\uff01EVENT.S_LOGIN_SUCCESS \u767b\u9646\u56de\u8c03"),g_UserData.openId=e.openId,window.g_openId=g_UserData.openId,!DEBUG){var n=WXSDK.getLaunchOptionsSync();g_Log("loginSucess"+JSON.stringify(n.query)),"{}"!=JSON.stringify(n.query)&&(g_Log("\u63a5\u53d7\u6311\u6218\u5411\u670d\u52a1\u5668\u53d1\u8bf7\u6c42,"+n.query),t.send_joinRoom({type:1,openid:g_openId,matchData:n.query}),g_GAME.m_startView.switchLayerShow(LAYER.matchL))}}),window.SOCKET.on(n.S_CREATE_ROOM_OK,function(t){g_Log("create_room_ok\uff0c\u5207\u6362\u6bd4\u8d5b\u754c\u9762"),DEBUG||(g_GAME.m_startView.switchLayerShow(LAYER.matchL),WXSDK.inviteFriend(t))})},e.sendMsg=function(t,e){void 0===e&&(e="0"),window.SOCKET.emit(t,e)},e.send_login=function(t){g_Log("\u53d1\u9001 login"),t.msgId=n.C_LOIN,this.sendMsg("GAME_MSG",t)},e.send_match=function(t){t.msgId=n.C_CREATE_ROOM,this.sendMsg("GAME_MSG",t)},e.send_joinRoom=function(t){g_Log("\u53d1\u9001 join_room"),t.msgId=n.C_JOIN_ROOM,this.sendMsg("GAME_MSG",t)},e.send_leftDown=function(t){g_Log("\u53d1\u9001 left_down"),t.msgId=n.C_LEFT_DOWN,this.sendMsg("GAME_MSG",t)},e.send_leftUp=function(t){g_Log("\u53d1\u9001 left_up"),t.msgId=n.C_LEFT_UP,this.sendMsg("GAME_MSG",t)},e.send_rightDown=function(t){g_Log("\u53d1\u9001 right_down"),t.msgId=n.C_RIGHT_DOWN,this.sendMsg("GAME_MSG",t)},e.send_rightUp=function(t){g_Log("\u53d1\u9001 right_up"),t.msgId=n.C_RIGHT_UP,this.sendMsg("GAME_MSG",t)},e.send_hit=function(t){g_Log("\u53d1\u9001 hit"),t.msgId=n.C_HIT,this.sendMsg("GAME_MSG",t)},e.send_jump=function(t){g_Log("\u53d1\u9001 jump"),t.msgId=n.C_JUMP,this.sendMsg("GAME_MSG",t)},t}();e.exports=a,cc._RF.pop()},{"./event-names.js":"event-names"}],game_battle:[function(t,e){"use strict";cc._RF.push(e,"e5c251d5dZP7rBN/tnNeOKL","game_battle");var n=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=i(void 0);if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in t)if("default"!==c&&Object.prototype.hasOwnProperty.call(t,c)){var s=o?Object.getOwnPropertyDescriptor(t,c):null;s&&(s.get||s.set)?Object.defineProperty(n,c,s):n[c]=t[c]}return n.default=t,e&&e.set(t,n),n}(t("../net/event-names"));function i(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(i=function(t){return t?n:e})(t)}var o=[],c=[],s=[];cc.Class({extends:cc.Component,properties:{m_Camera:cc.Node,m_Ball:cc.Node,m_Player:cc.Node,m_Player2:cc.Node,m_Door1:cc.Node,m_Door2:cc.Node,m_Score1:cc.Label,m_Score2:cc.Label,m_Hit:cc.Node,m_Hit2:cc.Node,m_BtnLeft:cc.Node,m_BtnRight:cc.Node,m_FeetSmoke:cc.Prefab,m_LandArr:{type:cc.Node,default:[]},m_No:cc.Node,m_ShowGoal:cc.Node,m_endLayer:cc.Node},ctor:function(){this.m_checkTime=null,this.m_LayerArr=[],this.m_JumpTime=0,this.m_Playerctr=null,this.m_PlayerctrOther=null},switchLayerShow:function(t){g_Log("\u5207\u6362\u754c\u9762"+t),this.m_LayerArr.forEach(function(e,n){e.active=n==t})},register:function(t,e){return t.getComponent(e)},onLoad:function(){this.serverMgr=g_SERVER,this.initGame(),this.getNodeCpt(),this.addTochListen(),this.addMsgListen(),this.key=""},initGame:function(){window.gameStatus=!0,cc.director.getCollisionManager().enabled=!0,cc.director.getPhysicsManager().enabled=!0,0==G_CHAIRID?(this.m_Playerctr=this.register(this.m_Player,"player"),this.m_PlayerctrOther=this.register(this.m_Player2,"player"),this.m_PlayerctrOther.setId(1)):(this.m_Playerctr=this.register(this.m_Player2,"player"),this.m_PlayerctrOther=this.register(this.m_Player,"player"),this.m_PlayerctrOther.setId(0)),this.m_Playerctr.setId(G_CHAIRID),this.m_PlayerBody=this.m_Playerctr.node.getComponent(cc.RigidBody)},initPlayer:function(){},getNodeCpt:function(){this.m_BallCtr=this.register(this.m_Ball,"ball"),c[0]=this.register(this.m_Player,"player"),c[1]=this.register(this.m_Player2,"player"),s[0]=this.m_Player.getComponent(cc.RigidBody),s[1]=this.m_Player2.getComponent(cc.RigidBody),o[0]=this.m_Door1.getComponent("door"),o[1]=this.m_Door2.getComponent("door"),c[0].setCtr(this),c[1].setCtr(this)},onKeyDown:function(t){switch(t.keyCode){case cc.macro.KEY.a:"a"!=this.key&&(this.onBtnClick_left(),this.key="a");break;case cc.macro.KEY.d:"d"!=this.key&&(this.key="d",this.onBtnClick_right());break;case cc.macro.KEY.space:this.key="",this.jump();break;case cc.macro.KEY.enter:this.key="",this.hit()}},onKeyUp:function(t){switch(this.key="",t.keyCode){case cc.macro.KEY.a:console.log("end!"),this.onBtnClick_leftEnd();break;case cc.macro.KEY.d:console.log("end!"),this.onBtnClick_rightEnd()}},addTochListen:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this),this.m_BtnLeft.on(cc.Node.EventType.TOUCH_START,this.onBtnClick_left,this,!0),this.m_BtnLeft.on(cc.Node.EventType.TOUCH_END,this.onBtnClick_leftEnd,this,!0),this.m_BtnRight.on(cc.Node.EventType.TOUCH_START,this.onBtnClick_right,this,!0),this.m_BtnRight.on(cc.Node.EventType.TOUCH_END,this.onBtnClick_rightEnd,this,!0)},addMsgListen:function(){var t=new Map;t.set(n.S_PLAYER_JUMP,this.callF_PLAYER_JUMP.bind(this)),t.set(n.S_PLAYER_FIRE,this.callF_PLAYER_FIRE.bind(this)),t.set(n.S_LEFT_START,this.callF_LEFT_START.bind(this)),t.set(n.S_LEFT_END,this.callF_LEFT_END.bind(this)),t.set(n.S_RIGHT_START,this.callF_RIGHT_START.bind(this)),t.set(n.S_RIGHT_END,this.callF_RIGHT_END.bind(this)),t.set(n.S_BALL_POS,this.callF_BALL_POS.bind(this)),t.set(n.S_NEW_ROUND,this.callF_NEW_ROUND.bind(this)),t.set(n.S_SET_SCORE,this.callF_SET_SCORE.bind(this)),t.set(n.S_GAME_END,this.callF_GAME_END.bind(this)),g_SERVER.registerMsgCallF(t)},start:function(){},onBtnClick_left:function(){if(c[g_UserData.id]){var t=c[g_UserData.id].node;this.serverMgr.send_leftDown({openId:g_UserData.openId,pos:{x:t.x,y:t.y}})}},onBtnClick_leftEnd:function(){if(c[g_UserData.id]){var t=c[g_UserData.id].node;this.serverMgr.send_leftUp({openId:g_UserData.openId,pos:{x:t.x,y:t.y}})}},onBtnClick_right:function(){if(c[g_UserData.id]){var t=c[g_UserData.id].node;this.serverMgr.send_rightDown({openId:g_UserData.openId,pos:{x:t.x,y:t.y}})}},onBtnClick_rightEnd:function(){if(c[g_UserData.id]){var t=c[g_UserData.id].node;this.serverMgr.send_rightUp({openId:g_UserData.openId,pos:{x:t.x,y:t.y}})}},update:function(){},hit:function(){if(this.m_checkTime){if(!(Date.now()-this.m_checkTime>300))return;this.m_checkTime=Date.now()}else this.m_checkTime=Date.now();if(this.m_Ball.active){this.m_Playerctr.setAni("hit1");var t=this.m_Ball.getPosition(),e=this.m_Playerctr.node.getPosition();e.y-=50;var n=t.sub(e);if(!(0==this.m_Playerctr.m_bFlip&&n.x<0||this.m_Playerctr.m_bFlip&&n.x>0)){var i=n.mag();if(!(i>MaxHitDis)){var o=1-i/MaxHitDis,c=MaxHitimpulse*o,s=n.angle(cc.v2(1,0)),a={y:-1*c*Math.sin(s),x:c*Math.cos(s)};flag[g_UserData.id]=!0,setTimeout(function(){flag[g_UserData.id]=!1},600),cc.v2(845,-905);var r="hit1",l="";n.y>80?r="hit1":n.y<=130&&n.y>20?(r="hit2",l="fire"):r="hit3",this.m_Playerctr.setAni(r,n),this.serverMgr.send_hit({impulse:a,ballStatus:l})}}}},jump:function(){this.serverMgr.send_jump({openId:g_UserData.openId})},buildSmoke:function(t,e){var n=cc.instantiate(this.m_FeetSmoke);n.parent=this.m_Playerctr.node.parent,n.setPosition(t),n.getComponent(cc.Animation).on("finished",this.onFinished,n);var i=cc.flipX(e);n.runAction(i)},onFinished:function(){this.destroy()},onReturn:function(){cc.director.preloadScene("hello",function(){cc.director.loadScene("hello")})},shake:function(){var t=40*Math.random()-20,e=40*Math.random()-20;this.m_Camera.x=t,this.m_Camera.y=e},callF_PLAYER_FIRE:function(t){this.m_BallCtr.setFire(t.bShow)},callF_PLAYER_JUMP:function(t){g_Log("jump");var e=s[t.id];if(e&&(g_Log("body.linearVelocity.y",e.linearVelocity.y),e.node.y<-710||0==e.linearVelocity.y)){var n=e.getWorldCenter(),i=e.node.getComponent("player");i.setAni("jump");var o=i.node.getPosition();o.y-=80,this.buildSmoke(o,i.m_bFlip),e.applyLinearImpulse(cc.v2(0,3e3),n)}},correctPos:function(t,e){t.runAction(cc.moveTo(.5,cc.v2(e.x,e.y)))},callF_LEFT_START:function(t){g_Log("left_start"),c[t.id].setMoveType(1),this.correctPos(c[t.id].node,t.pos)},callF_LEFT_END:function(t){c[t.id].setMoveType(0),c[t.id].resetAni(),c[t.id].node.x=t.pos.x-21,c[t.id].node.y=t.pos.y},callF_RIGHT_START:function(t){c[t.id].setMoveType(2),this.correctPos(c[t.id].node,t.pos)},callF_RIGHT_END:function(t){c[t.id].setMoveType(0),c[t.id].resetAni(),c[t.id].node.x=t.pos.x+21,c[t.id].node.y=t.pos.y},callF_BALL_POS:function(t){this.m_Ball.active||(this.m_Ball.active=!0),this.m_Ball.x=t.pos_ball.x-960,this.m_Ball.y=t.pos_ball.y+540,g_Log("msg.pos_ball.angle"+t.pos_ball.angle),this.m_Ball.rotation=t.pos_ball.angle*(180/3.14)},callF_NEW_ROUND:function(){this.m_Ball.active=!0},callF_SET_SCORE:function(t){var e=t.goalData;this.m_Ball.active=!1,t.id,1*e[0]>1*this.m_Score1.string&&o[1].m_Ani.play(),1*e[1]>1*this.m_Score2.string&&o[0].m_Ani.play(),this.m_Score1.string=e[0],this.m_Score2.string=e[1],this.schedule(this.shake,1/60,60),this.scheduleOnce(function(){this.m_Camera.setPosition(0,0),this.unschedule(this.shake)},1)},callF_GAME_END:function(){window.gameStatus=0,this.m_PlayerctrOther.end(),this.m_Playerctr.end(),g_Log("gameEnd"),this.m_endLayer.active=!0,cc.director.preloadScene("hello",function(){cc.director.loadScene("hello")})}}),window.translate=function(t){return{x:t.x/30,y:-1*t.y/30}},window.translate2=function(t){return t.x*=30,t.y*=-30,t},cc._RF.pop()},{"../net/event-names":"event-names"}],game_bullet:[function(t,e){"use strict";cc._RF.push(e,"fa442PfmSNKc5cogVcW/Mow","game_bullet"),cc.Class({extends:cc.Component,properties:{m_Basket:cc.Node,m_Basket2:cc.Node,m_Edge1:cc.Node,m_Edge2:cc.Node,M_Chain:cc.Node,m_ChainArr:{type:cc.Node,default:[]},m_BulletArr:{type:cc.Node,default:[]},m_Fight:cc.Node},ctor:function(){this.m_BulletSum=14,this.m_Status=null},onLoad:function(){this.m_Fight.getComponent("fight").setCtr(this),g_gameLayer2=this},addTochListen:function(){this.Node.on(cc.Node.EventType.TOUCH_START,this.onBtnClick_left,this,!0)},onEnable:function(){},goal:function(){this.m_BulletSum=14,this.refreshBulletShow();var t=700*Math.random()-365,e=560*Math.random()-180,n=t-this.m_Basket2.x,i=e-this.m_Basket2.y;this.m_ChainArr.forEach(function(t){return t.setPosition(t.x+n,t.y+i)}),this.m_Basket2.x=t,this.m_Basket2.y=e,this.m_Basket.x=this.m_Basket2.x,this.m_Basket.y=this.m_Basket2.y-135,this.m_Edge1.x=this.m_Basket2.x-80,this.m_Edge1.y=this.m_Basket2.y-110,this.m_Edge2.x=this.m_Basket2.x+80,this.m_Edge2.y=this.m_Basket2.y-110},gameEnd:function(){this.m_BulletSum=14,this.refreshBulletShow()},resetPosition:function(){},refreshBulletShow:function(){var t=this;this.m_BulletArr.forEach(function(e,n){e.active=!(n>t.m_BulletSum-1)})},reduceBullet:function(){this.m_BulletSum--,0==this.m_BulletSum?this.gameEnd():this.refreshBulletShow()},home:function(){window.back()}}),cc._RF.pop()},{}],hello:[function(t,e){"use strict";cc._RF.push(e,"d6c23qIEo9IsraWw9K+JSM4","hello");var n=t("gameServer");cc.Class({extends:cc.Component,properties:{m_lanuchView:cc.Node,m_startView:cc.Node},ctor:function(){},switchLayerShow:function(t){g_Log("\u5207\u6362\u754c\u9762"+t)},onLoad:function(){cc.director.getCollisionManager().enabled=!0,cc.director.getPhysicsManager().enabled=!0,this.m_startView=this.m_startView.getComponent("startLayer"),this.m_startView=this.m_startView.getComponent("startLayer"),this.serverMgr=new n,g_SERVER=this.serverMgr},start:function(){},onFinished:function(){this.destroy()}}),cc._RF.pop()},{gameServer:"gameServer"}],joystick:[function(t,e){"use strict";cc._RF.push(e,"2000bTbLEtKXbRKEmuL70lx","joystick"),cc.Class({extends:cc.Component,properties:{},ctor:function(){this.m_basePoint=null},start:function(){}}),cc._RF.pop()},{}],land:[function(t,e){"use strict";cc._RF.push(e,"a3d20zdoKxFYaILMKEefgeE","land"),cc.Class({extends:cc.Component,properties:{landNode:cc.Node,dt:cc.Number},start:function(){console.log(cc.view.getVisibleSize())},update:function(t){cc.view.getVisibleSize(),this.landNode.x-=10*t,this.landNode.x<-2979.18&&(this.landNode.x=2989.044)}}),cc._RF.pop()},{}],lanuchLayer:[function(t,e){"use strict";cc._RF.push(e,"0954f3Id5dD8IB3um3rzM4D","lanuchLayer");var n=t("WxSDKAPI");cc.Class({extends:cc.Component,properties:{m_StartBtn:cc.Node},onLoad:function(){DEBUG?this.startGame():(WXSDK=new n,WXSDK.init(this.m_StartBtn,this.startGame.bind(this)))},startGame:function(){g_Log("\u8fdb\u5165\u5927\u5385"),this.node.active=!1,g_GAME.m_lobby.active=!0,g_GAME.switchLayerShow(LAYER.lobbyL)},start:function(){}}),cc._RF.pop()},{WxSDKAPI:"WxSDKAPI"}],lobbyLayer:[function(t,e){"use strict";cc._RF.push(e,"996c90Cw05JBYoVUwPP1m0/","lobbyLayer"),cc.Class({extends:cc.Component,properties:{m_Ball:cc.Node,m_ChaArr:{default:[],type:cc.Node}},ctor:function(){this.m_tarBallId=0},onLoad:function(){this.m_Ball=this.m_Ball.getComponent("ball"),this.m_Ball.setCtr(this)},onEnable:function(){this.m_Ball.switchBall(GAME_DATA.ballId),this.m_ChaArr.forEach(function(t,e){GAME_DATA.characterId==e?t.active=!0:t.active=!1})},start:function(){}}),cc._RF.pop()},{}],matchLayer:[function(t,e){"use strict";cc._RF.push(e,"15c6bTcLwZF7rneXrTK+6kG","matchLayer"),cc.Class({extends:cc.Component,properties:{m_HeadImg1:cc.Sprite,m_HeadImg2:cc.Sprite},ctor:function(){},onLoad:function(){},onEnable:function(){},start:function(){},renderLayer:function(){WXSDK.setUserIcon(g_UserData.avatarUrl,this.m_HeadImg1)},back:function(){g_StartLayer.switchLayerShow(LAYER.lobbyL)}}),cc._RF.pop()},{}],par:[function(t,e){"use strict";cc._RF.push(e,"cc7221q+1VL6YcEkK3o2mBc","par"),cc.Class({extends:cc.Component,properties:{},ctor:function(){},onEnable:function(){var t=Math.random();this.scheduleOnce(function(){this.getComponent(cc.ParticleSystem).resetSystem()},t)}}),cc._RF.pop()},{}],"physics-bound":[function(t,e){"use strict";cc._RF.push(e,"46d5eCJoHxE7bKT/5dgkYN/","physics-bound"),cc.Class({extends:cc.Component,properties:{size:cc.size(0,0),mouseJoint:!0,test:cc.Node},onLoad:function(){var t=this.size.width||this.node.width,e=this.size.height||this.node.height,n=new cc.Node;n.addComponent(cc.RigidBody).type=cc.RigidBodyType.Static,this._addBound(n,0,e/2-100,t,20),this._addBound(n,0,-e/2+110,t,20),this._addBound(n,-t/2,0,20,e),this._addBound(n,t/2,0,20,e),n.parent=this.node},_addBound:function(t,e,n,i,o){var c=t.addComponent(cc.PhysicsBoxCollider);c.offset.x=e,c.offset.y=n,c.size.width=i,c.size.height=o},testbtn:function(){var t=this.test.getComponent(cc.RigidBody),e=t.getWorldCenter();t.applyLinearImpulse(cc.v2(0,3e9),e)}}),cc._RF.pop()},{}],player:[function(t,e){"use strict";cc._RF.push(e,"588cdzd0VRCe74JdVLDcoOO","player"),cc.Class({extends:cc.Component,properties:{m_Ani:dragonBones.ArmatureDisplay,m_Hit:cc.Animation},ctor:function(){this.m_moveType=null,this.bMoving=!1,this.m_Ctr=null,this.m_smokeTime=0,this.m_bFlip=!1,this._armatureDisPlay=null,this.m_bDowning=!1,this.m_aniArr=[]},onLoad:function(){},initAniData:function(){var t=this.m_id+1;this.m_aniArr.hit1="hit"+t+"_1",this.m_aniArr.hit2="hit"+t+"_2",this.m_aniArr.hit3="hit"+t+"_3",this.m_aniArr.walk="walk"+t,this.m_aniArr.jump="jump"+t,this.m_aniArr.fire="fire"+t,this.m_aniArr.stand="stand"+t,this.m_aniArr.hit1="hit"+t+"_1"},getAniName:function(t){return this.m_aniArr[t]?this.m_aniArr[t]:"stand1"},setFlip:function(t){this.m_bFlip=t},start:function(){},setCtr:function(t){this.m_Ctr=t},setId:function(t){this.m_id=t,this.initAniData(),this._armatureDisPlay=this.m_Ani,this.m_Body=this.node.getComponent(cc.RigidBody),this.setAni("stand",-1)},sendPos:function(t){var e,n,i;this.m_moveType&&(2==this.m_moveType?0!=(null==(e=this.m_Body)?void 0:e.linearVelocity.y)?this.node.x+=SPEED:(this.node.x+=SPEED,this.m_smokeTime+=t,this.m_smokeTime>1&&((i=this.node.getPosition()).y-=80,this.m_Ctr.buildSmoke(i,this.m_bFlip),this.m_smokeTime=0)):0!=(null==(n=this.m_Body)?void 0:n.linearVelocity.y)?this.node.x-=SPEED:(this.node.x-=SPEED,this.m_smokeTime+=t,this.m_smokeTime>1&&((i=this.node.getPosition()).y-=80,this.m_smokeTime=0)))},OnTouchMove:function(t){this.node.x+=t.getDelta().x,this.node.y+=t.getDelta().y;var e={};e.x=this.node.x,e.y=this.node.y,socket.emit("pos_p",{bFlip:this.m_bFlip,pos:e,id:g_UserData.openId})},setMoveType:function(t){var e=this;if(this.m_moveType=t,this.UpdateInst||(this.UpdateInst=setInterval(function(){e.sendPos.call(e,1/60)},1e3/PACKET_PER_SEC)),this.resetAni(),1==this.m_moveType){this.m_bFlip=!0;var n=cc.flipX(this.m_bFlip);this.m_Ani.node.runAction(n)}else 2==this.m_moveType&&(this.m_bFlip=!1,n=cc.flipX(this.m_bFlip),this.m_Ani.node.runAction(n))},hit:function(t){if(this.m_Ctr.m_Ball.active&&(this.m_id!=g_UserData.id||!flag[g_UserData.id])){var e=t.getPosition(),n=this.node.getPosition(),i=e.sub(n);if(!this.m_moveType&&0==this.m_bFlip&&i.x<0){this.m_bFlip=!this.m_bFlip;var o=cc.flipX(this.m_bFlip);this.m_Ani.node.runAction(o)}!this.m_moveType&&this.m_bFlip&&i.x>0&&(this.m_bFlip=!this.m_bFlip,o=cc.flipX(this.m_bFlip),this.m_Ani.node.runAction(o));var c=i.angle(cc.v2(1,0)),s={y:-180*Math.sin(c)/2,x:180*Math.cos(c)/2};"fire"==t.getComponent("ball").getStatus()?this.setAni("fire",1,i):this.setAni("hit2",1,i),g_SERVER.send_hit({impulse:s,type:"body"})}},onBeginContact:function(t,e,n){if("ball"==n.node.name){var i=e.node.getPosition(),o=n.node.getPosition(),c=i.sub(o).angle(cc.v2(1,0)),s={y:2e3*Math.sin(c),x:-2e3*Math.cos(c)/2},a=n.node.getComponent(cc.RigidBody),r=a.getWorldCenter();a.linearVelocity=cc.v2(0,0),a.applyLinearImpulse(cc.v2(s.x,s.y),r)}},onCollisionEnter:function(t){"ball"==t.node.name&&this.hit(t.node)},setAni:function(t,e,n){void 0===e&&(e=1),t=this.getAniName(t),n&&(this.m_Hit.node.setPosition(n),this.m_Hit.play()),this._armatureDisPlay.playAnimation(t,e),this._armatureDisPlay.addEventListener(dragonBones.EventObject.COMPLETE,this.resetAni,this)},resetAni:function(){this.m_bDowning?this.setAni("stand",-1):this.m_moveType?this.setAni("walk",-1):this.setAni("stand",-1)},end:function(){clearInterval(this.UpdateInst)},update:function(){var t;this.m_Body&&this.m_Body.linearVelocity&&((null==(t=this.m_Body)?void 0:t.linearVelocity.y)<0?(this.m_bDowning||(this.m_bDowning=!0,this._armatureDisPlay.playAnimation("down",-1)),this.m_bDowning&&"stand"==this._armatureDisPlay.animationName&&this._armatureDisPlay.playAnimation("down",-1)):0==this.m_Body.linearVelocity.y&&this.m_bDowning&&(this.m_bDowning=!1,this.node.getPosition().y-=80,this.resetAni()))}}),cc._RF.pop()},{}],startLayer:[function(t,e){"use strict";cc._RF.push(e,"b6a0cBXlWVBiKs2k/yTAg8X","startLayer"),t("WxSDKAPI"),window.wxSdk=null;var n=cc.Enum({matchL:-1,characterL:-1,ballL:-1,bulletL:-1,lobbyL:-1,achieventL:-1,endL:-1,gameInfo:-1});cc.Class({extends:cc.Component,properties:{m_ui:cc.Node,m_lobbyLayer:cc.Node,m_achieventLayerPre:cc.Prefab,m_characterLayerPre:cc.Prefab,m_endLayerPre:cc.Prefab,m_matchLayerPre:cc.Prefab,m_ballPrefab:cc.Prefab,m_gameInfoLayeyPrefab:cc.Prefab,m_gameBulletLayer:cc.Prefab},ctor:function(){this.m_layerArr=[],this.m_prefabArr_layer=[],this.m_btnCallFMgr={0:this.CallF_battle,1:this.CallF_myChracter,2:this.CallF_myBall,3:this.CallF_bullet,4:this.CallF_lobby,5:this.CallF_achievent,6:this.CallF_end},this.m_Ctr=null,this.m_smokeTime=0,this.m_bFlip=!1,this._armatureDisPlay=null,this.m_bDowning=!1},onLoad:function(){this.m_layerArr[n.lobbyL]=this.m_lobbyLayer,this.m_prefabArr_layer[n.matchL]=this.m_matchLayerPre,this.m_prefabArr_layer[n.characterL]=this.m_characterLayerPre,this.m_prefabArr_layer[n.achieventL]=this.m_achieventLayerPre,this.m_prefabArr_layer[n.endL]=this.m_endLayerPre,this.m_prefabArr_layer[n.ballL]=this.m_ballPrefab,this.m_prefabArr_layer[n.gameInfo]=this.m_gameInfoLayeyPrefab,this.m_prefabArr_layer[n.bulletL]=this.m_gameBulletLayer,g_StartLayer=this},onEnable:function(){g_Log("\u83b7\u53d6\u7528\u6237\u7684\u4fe1\u606f"),DEBUG||WXSDK.getUserInfo(this.updateLayer.bind(this))},updateLayer:function(){g_Log("\u83b7\u53d6\u73a9\u5bb6\u7528\u6237\u4fe1\u606f\u56de\u8c03\u51fd\u6570\uff0c\u8bbe\u7f6e\u73a9\u5bb6\u5934\u50cf"),WXSDK.setUserIcon(g_UserData.avatarUrl,this.m_HeadImg)},start:function(){this._armatureDisPlay=this.m_Ani,this.m_Body=this.node.getComponent(cc.RigidBody)},setGameEngine:function(t){g_GAME=t},onBtnClick:function(t,e){this.m_layerArr[e]||this.addLayer(e),this.switchLayerShow(e),e in this.m_btnCallFMgr?this.m_btnCallFMgr[e].call(this,e):g_Log("\u8be5\u6309\u94ae\u672a\u914d\u7f6e\u51fd\u6570")},switchLayerShow:function(t){g_Log("\u5207\u6362\u754c\u9762"+t),this.m_layerArr.forEach(function(e,n){e.active=n==t}),this.m_ui.active=t!=n.matchL},CallF_battle:function(){g_Log("\u73a9\u5bb6\u5bf9\u6218"),g_SERVER.send_match({type:1,openid:g_openId||Date.now()})},addLayer:function(t){var e=this,i=cc.instantiate(this.m_prefabArr_layer[t]);return this.node.addChild(i),this.m_layerArr[t]=i,t==n.bulletL&&(window.back=function(){e.switchLayerShow(n.lobbyL)}),i},CallF_bullet:function(){g_Log("\u5b50\u5f39\u6a21\u5f0f")},CallF_myBall:function(){g_Log("\u6211\u7684\u7403")},CallF_myChracter:function(){g_Log("\u6211\u7684\u89d2\u8272")},CallF_achievent:function(){},CallF_end:function(){},CallF_lobby:function(){}}),cc._RF.pop()},{WxSDKAPI:"WxSDKAPI"}],statusMgr:[function(t,e){"use strict";cc._RF.push(e,"10403T7pKhDQICl68v2IKWt","statusMgr"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],target:[function(t,e){"use strict";cc._RF.push(e,"354a5AwpIdFcqAGTLw6dc5o","target"),cc.Class({extends:cc.Component,properties:{m_target:cc.Node},ctor:function(){},start:function(){var t=this;this.node.on(cc.Node.EventType.TOUCH_MOVE,function(e){t.touchMove(e)},this)},touchMove:function(t){var e=this.node.convertToNodeSpaceAR(t.getLocation());this.m_target.setPosition(e)}}),cc._RF.pop()},{}],test:[function(t,e){"use strict";cc._RF.push(e,"8981eSu2JZFoJ1uTP/ieNLf","test"),cc._RF.pop()},{}],"use_v2.0.x_cc.Toggle_event":[function(t,e){"use strict";cc._RF.push(e,"0fa86QlA/dJxJ49FbP6FxMG","use_v2.0.x_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_check=!0),cc._RF.pop()},{}]},{},["use_v2.0.x_cc.Toggle_event","ballItem","Notification","ball","btn","joystick","par","physics-bound","test","door","player","ball_bullet","bk_check","fight","target","define","clound","land","achLayer","ballLayer","charactorLayer","gameInfoLayer","lanuchLayer","lobbyLayer","matchLayer","startLayer","event-names","gameServer","game_battle","game_bullet","hello","WxSDKAPI","NewScript","statusMgr"]);